@startuml クローズユーザーユースケース図_修正版
left to right direction
skinparam actorStyle stick

' --- アクターの定義 ---
actor ユーザー
actor 在庫管理者
actor カスタマーサポート
actor ユーザー管理者
actor 配送管理者

' --- 顧客向けユーザー (変更なし) ---
rectangle ユーザー機能 {
    usecase "ログインする" as login_u
    usecase "ログアウトする" as logout_u
    ユーザー --> (商品を検索する)
    ユーザー --> (商品をカートに入れる)
    ユーザー --> (注文する)
    ユーザー --> (登録情報を変更する)
    ユーザー --> (登録情報を削除する)
    ユーザー --> (新規登録する)
    ユーザー --> login_u
    ユーザー --> logout_u
    ユーザー --> (配送状況を確認する)
    ユーザー --> (返品を申請する)
    ユーザー --> (注文をキャンセルする)
    ユーザー --> (退会する)
}

' --- 管理システム (修正箇所) ---
rectangle 管理システム {

    package 在庫管理機能 {
        usecase "ログインする" as z_login
        usecase "ログアウトする" as z_logout
        在庫管理者 --> z_login
        在庫管理者 --> z_logout
        
        ' 在庫管理の分割、スラッシュの排除
        在庫管理者 --> (在庫数を更新する) 
        在庫管理者 --> (商品を登録する)
        在庫管理者 --> (商品情報を変更する)
        在庫管理者 --> (商品を削除する)
    }

    package サポート機能 {
        usecase "ログインする" as s_login
        usecase "ログアウトする" as s_logout
        カスタマーサポート --> (返品・返金処理を実行する)
        カスタマーサポート --> (顧客の注文履歴を確認する)
        カスタマーサポート --> s_login
        カスタマーサポート --> s_logout
    }
    
    package ユーザー管理機能 {
        usecase "ログインする" as u_login
        usecase "ログアウトする" as u_logout
        
        ' ユーザー管理・サイト設定を削除
        ' ユーザー追加のユースケースを修正
        ユーザー管理者 --> (顧客アカウントを削除する)
        ユーザー管理者 --> (顧客アカウントを停止する)
        ユーザー管理者 --> u_login
        ユーザー管理者 --> u_logout
        ユーザー管理者 --> (管理者アカウントを追加する)
    }
    
    package 配送管理 {
        usecase "ログインする" as d_log
        usecase "ログアウトする" as d_out
        
        ' 注文一覧（名詞）を削除し、動詞句に変更
        配送管理者 --> (配送対象の注文を確認する) 
        配送管理者 --> (配送ステータスを更新する)
        配送管理者 --> d_log
        配送管理者 --> d_out
    }
}

@enduml